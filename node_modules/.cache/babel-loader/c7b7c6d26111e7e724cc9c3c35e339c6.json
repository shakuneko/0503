{"ast":null,"code":"import { SET_PAGE_CONTENT, SET_NAVBAR_ACTIVEITEM, ADD_CART_ITEM, REMOVE_CART_ITEM, SET_PRODUCT_DETAIL, BEGIN_LOGIN_REQUEST, SUCCESS_LOGIN_REQUEST, FAIL_LOGIN_REQUEST, LOGOUT_REQUEST, REMEMBER_LOGIN, BEGIN_REGISTER_REQUEST, SUCCESS_REGISTER_REQUEST, FAIL_REGISTER_REQUEST, SAVE_SHIPPING_ADDRESS, SAVE_PAYMENT_METHOD, BEGIN_ORDER_CREATE, SUCCESS_ORDER_CREATE, FAIL_ORDER_CREATE, BEGIN_ORDER_DETAIL, SUCCESS_ORDER_DETAIL, FAIL_ORDER_DETAIL, BEGIN_UPDATE_USERINFO, SUCCESS_UPDATE_USERINFO, FAIL_UPDATE_USERINFO, EMPTY_CART, SEARCH_USER_ORDERS, SUCCESS_SEARCH, FAIL_SEARCH } from \"../utils/constants\";\nimport products from \"../json/products.json\";\nimport { signInWithEmailPassword, checkLoginApi, registerWithEmailPassword, createOrderApi, getOrderById, updateUserInfoApi, getOrderByUser, signOut } from \"../api/index\";\nexport const addCartItem = (dispatch, product, qty, col, colNum) => {\n  const item = {\n    id: product.id,\n    name: product.name,\n    image: product.image,\n    price: product.price,\n    author: product.author,\n    countInStock: product.countInStock,\n    qty,\n    col,\n    colNum\n  };\n  dispatch({\n    type: ADD_CART_ITEM,\n    payload: item\n  });\n};\nexport const removeCartItem = (dispatch, productId) => {\n  dispatch({\n    type: REMOVE_CART_ITEM,\n    payload: productId\n  });\n};\nexport const setProductDetail = (dispatch, productId, qty, col, colNum) => {\n  const product = products.find(x => x.id === productId);\n  if (qty === 0 && product.countInStock > 0) qty = 1;\n  if (col === \"\") col = \"None\";\n  dispatch({\n    type: SET_PRODUCT_DETAIL,\n    payload: {\n      product,\n      qty,\n      col,\n      colNum\n    }\n  });\n};\nexport const setPage = async (dispatch, url, title) => {\n  let products = [];\n  dispatch({\n    type: BEGIN_PRODUCTS_REQUEST\n  });\n  dispatch({\n    type: SET_PAGE_TITLE,\n    payload: title\n  });\n\n  try {\n    products = await getProducts(url);\n    dispatch({\n      type: SET_PAGE_CONTENT,\n      payload: {\n        title,\n        products\n      }\n    });\n    dispatch({\n      type: SET_NAVBAR_ACTIVEITEM,\n      payload: url\n    });\n    dispatch({\n      type: SUCCESS_PRODUCTS_REQUEST\n    });\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: FAIL_PRODUCTS_REQUEST,\n      payload: error\n    });\n  }\n};\nexport const pageContentsSet = (dispatch, title, products) => {\n  dispatch({\n    type: SET_PAGE_CONTENT,\n    payload: {\n      title,\n      products\n    }\n  });\n};\nexport const activeNavItemSet = (dispatch, activeNavItem) => {\n  dispatch({\n    type: SET_NAVBAR_ACTIVEITEM,\n    payload: activeNavItem\n  });\n};\nexport const loginToFirebase = async (dispatch, userInfo) => {\n  dispatch({\n    type: BEGIN_LOGIN_REQUEST\n  });\n\n  try {\n    const user = await signInWithEmailPassword(userInfo.email, userInfo.password);\n    dispatch({\n      type: SUCCESS_LOGIN_REQUEST,\n      payload: user.user.providerData[0]\n    });\n    return user;\n  } catch (e) {\n    dispatch({\n      type: FAIL_LOGIN_REQUEST,\n      payload: e.message\n    });\n    console.log(e);\n    return null;\n  }\n};\nexport const rememberLoginUser = (dispatch, remember) => {\n  dispatch({\n    type: REMEMBER_LOGIN,\n    payload: remember\n  });\n};\nexport const checkLogin = dispatch => {\n  const isLogin = checkLoginApi();\n\n  if (!isLogin) {\n    localStorage.removeItem('orderInfo');\n    dispatch({\n      type: LOGOUT_REQUEST\n    });\n  }\n\n  return isLogin;\n};\nexport const registerToFirebase = async (dispatch, userInfo) => {\n  dispatch({\n    type: BEGIN_REGISTER_REQUEST\n  });\n\n  try {\n    const user = await registerWithEmailPassword(userInfo.email, userInfo.password, userInfo.name);\n    console.log(user);\n    dispatch({\n      type: SUCCESS_REGISTER_REQUEST,\n      payload: user.providerData[0]\n    });\n    return user;\n  } catch (e) {\n    dispatch({\n      type: FAIL_REGISTER_REQUEST,\n      payload: e.message\n    });\n    console.log(e);\n    return null;\n  }\n};\nexport const saveShippingAddress = (dispatch, shippingAddress) => {\n  dispatch({\n    type: SAVE_SHIPPING_ADDRESS,\n    payload: shippingAddress\n  });\n  localStorage.setItem('shippingAddress', JSON.stringify(shippingAddress));\n};\nexport const savePaymentMethod = (dispatch, paymentMethod) => {\n  dispatch({\n    type: SAVE_PAYMENT_METHOD,\n    payload: paymentMethod.paymentMethod\n  });\n};\nexport const createOrder = async (dispatch, cart) => {\n  dispatch({\n    type: BEGIN_ORDER_CREATE\n  });\n\n  try {\n    const item = {\n      orderItems: cart.cartItems,\n      shippingAddress: cart.shippingAddress,\n      paymentMethod: cart.paymentMethod,\n      itemsPrice: cart.itemsPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice\n    };\n    const orderInfo = await createOrderApi(item);\n    dispatch({\n      type: SUCCESS_ORDER_CREATE,\n      payload: orderInfo\n    });\n    dispatch({\n      type: EMPTY_CART\n    });\n    localStorage.setItem('orderInfo', JSON.stringify(orderInfo));\n    localStorage.removeItem(\"cartItems\");\n    return orderInfo;\n  } catch (error) {\n    console.log(error);\n    dispatch({\n      type: FAIL_ORDER_CREATE,\n      payload: error\n    });\n    return null;\n  }\n};\nexport const requestOrderDetail = async (dispatch, orderId) => {\n  dispatch({\n    type: BEGIN_ORDER_DETAIL\n  });\n\n  try {\n    const order = await getOrderById(orderId);\n    dispatch({\n      type: SUCCESS_ORDER_DETAIL,\n      payload: order\n    });\n  } catch (error) {\n    dispatch({\n      type: FAIL_ORDER_DETAIL,\n      payload: error\n    });\n  }\n};\nexport const updateUserInfo = async (dispatch, userInfo) => {\n  dispatch({\n    type: BEGIN_UPDATE_USERINFO\n  });\n\n  try {\n    const user = await updateUserInfoApi(userInfo.email, userInfo.password, userInfo.name);\n    dispatch({\n      type: SUCCESS_UPDATE_USERINFO,\n      payload: user.providerData[0]\n    });\n  } catch (e) {\n    dispatch({\n      type: FAIL_UPDATE_USERINFO,\n      payload: e.message\n    });\n    console.log(e);\n  }\n};\nexport const getUserOrders = async dispatch => {\n  dispatch({\n    type: SEARCH_USER_ORDERS\n  });\n\n  try {\n    const orders = await getOrderByUser();\n    dispatch({\n      type: SUCCESS_SEARCH,\n      payload: orders\n    });\n  } catch (error) {\n    dispatch({\n      type: FAIL_SEARCH,\n      payload: error\n    });\n  }\n};\nexport const logoutFromFirebase = async dispatch => {\n  signOut();\n  dispatch({\n    type: LOGOUT_REQUEST\n  });\n};","map":{"version":3,"sources":["C:/Users/yujaa/Desktop/yourhome/src/action/index.js"],"names":["SET_PAGE_CONTENT","SET_NAVBAR_ACTIVEITEM","ADD_CART_ITEM","REMOVE_CART_ITEM","SET_PRODUCT_DETAIL","BEGIN_LOGIN_REQUEST","SUCCESS_LOGIN_REQUEST","FAIL_LOGIN_REQUEST","LOGOUT_REQUEST","REMEMBER_LOGIN","BEGIN_REGISTER_REQUEST","SUCCESS_REGISTER_REQUEST","FAIL_REGISTER_REQUEST","SAVE_SHIPPING_ADDRESS","SAVE_PAYMENT_METHOD","BEGIN_ORDER_CREATE","SUCCESS_ORDER_CREATE","FAIL_ORDER_CREATE","BEGIN_ORDER_DETAIL","SUCCESS_ORDER_DETAIL","FAIL_ORDER_DETAIL","BEGIN_UPDATE_USERINFO","SUCCESS_UPDATE_USERINFO","FAIL_UPDATE_USERINFO","EMPTY_CART","SEARCH_USER_ORDERS","SUCCESS_SEARCH","FAIL_SEARCH","products","signInWithEmailPassword","checkLoginApi","registerWithEmailPassword","createOrderApi","getOrderById","updateUserInfoApi","getOrderByUser","signOut","addCartItem","dispatch","product","qty","col","colNum","item","id","name","image","price","author","countInStock","type","payload","removeCartItem","productId","setProductDetail","find","x","setPage","url","title","BEGIN_PRODUCTS_REQUEST","SET_PAGE_TITLE","getProducts","SUCCESS_PRODUCTS_REQUEST","error","console","log","FAIL_PRODUCTS_REQUEST","pageContentsSet","activeNavItemSet","activeNavItem","loginToFirebase","userInfo","user","email","password","providerData","e","message","rememberLoginUser","remember","checkLogin","isLogin","localStorage","removeItem","registerToFirebase","saveShippingAddress","shippingAddress","setItem","JSON","stringify","savePaymentMethod","paymentMethod","createOrder","cart","orderItems","cartItems","itemsPrice","shippingPrice","taxPrice","totalPrice","orderInfo","requestOrderDetail","orderId","order","updateUserInfo","getUserOrders","orders","logoutFromFirebase"],"mappings":"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","sourcesContent":["import {\n  SET_PAGE_CONTENT,\n  SET_NAVBAR_ACTIVEITEM,\n  ADD_CART_ITEM,\n  REMOVE_CART_ITEM,\n  SET_PRODUCT_DETAIL,\n\n  BEGIN_LOGIN_REQUEST,\n  SUCCESS_LOGIN_REQUEST,\n  FAIL_LOGIN_REQUEST,\n  LOGOUT_REQUEST,\n  REMEMBER_LOGIN,\n\n  BEGIN_REGISTER_REQUEST,\n  SUCCESS_REGISTER_REQUEST,\n  FAIL_REGISTER_REQUEST,\n\n  SAVE_SHIPPING_ADDRESS,\n  SAVE_PAYMENT_METHOD,\n\n  BEGIN_ORDER_CREATE,\n  SUCCESS_ORDER_CREATE,\n  FAIL_ORDER_CREATE,\n\n  BEGIN_ORDER_DETAIL,\n  SUCCESS_ORDER_DETAIL,\n  FAIL_ORDER_DETAIL,\n\n  BEGIN_UPDATE_USERINFO,\n  SUCCESS_UPDATE_USERINFO,\n  FAIL_UPDATE_USERINFO,\n\n  EMPTY_CART,\n\n  SEARCH_USER_ORDERS,\n  SUCCESS_SEARCH,\n  FAIL_SEARCH,\n} from \"../utils/constants\";\n\nimport products from \"../json/products.json\";\n\n\nimport {\n  signInWithEmailPassword,\n  checkLoginApi,\n  registerWithEmailPassword,\n  createOrderApi,\n  getOrderById,\n  updateUserInfoApi,\n  getOrderByUser,\n  signOut\n\n} from \"../api/index\";\n\nexport const addCartItem = (dispatch, product, qty,col,colNum) => {\n  const item = {\n    id: product.id,\n    name: product.name,\n    image: product.image,\n    price: product.price,\n    author:product.author,\n    countInStock: product.countInStock,\n    qty,\n    col,\n    colNum\n  };\n  dispatch({\n    type: ADD_CART_ITEM,\n    payload: item,\n  });\n};\n\nexport const removeCartItem = (dispatch, productId) => {\n  dispatch({\n    type: REMOVE_CART_ITEM,\n    payload: productId,\n  });\n};\n\n\nexport const setProductDetail = (dispatch, productId, qty,col,colNum) => {\n  const product = products.find(\n    x => x.id === productId\n  );\n  \n  if(qty === 0 && product.countInStock >0)\n      qty = 1;\n      if(col===\"\")col=\"None\";\n\n  dispatch({\n    type: SET_PRODUCT_DETAIL,\n    payload: {\n      product,\n      qty,\n      col,\n      colNum\n    }\n  })\n}\n\nexport const setPage = async (dispatch, url, title) => {\n  let products = [];\n  dispatch({ type: BEGIN_PRODUCTS_REQUEST });\n  dispatch({\n    type: SET_PAGE_TITLE,\n    payload: title,\n  });\n  try {\n    products = await getProducts(url);\n    dispatch({\n      type: SET_PAGE_CONTENT,\n      payload: { title, products },\n    });\n    dispatch({\n      type: SET_NAVBAR_ACTIVEITEM,\n      payload: url,\n    });\n    dispatch({ type: SUCCESS_PRODUCTS_REQUEST });\n  } catch (error) {\n    console.log(error);\n    dispatch({ type: FAIL_PRODUCTS_REQUEST, payload: error });\n  }\n}\n\nexport const pageContentsSet = (dispatch, title, products) => {\n  dispatch({\n    type: SET_PAGE_CONTENT,\n    payload: { title, products },\n  });\n};\n\nexport const activeNavItemSet = (dispatch, activeNavItem) => {\n  dispatch({\n    type: SET_NAVBAR_ACTIVEITEM,\n    payload: activeNavItem,\n  });\n};\n\n\nexport const loginToFirebase = async (dispatch, userInfo) => {\n  dispatch({ type: BEGIN_LOGIN_REQUEST });\n  try {\n    const user = await signInWithEmailPassword(userInfo.email, userInfo.password);\n    dispatch({\n      type: SUCCESS_LOGIN_REQUEST,\n      payload: user.user.providerData[0],\n    })\n    return user;\n  } catch (e) {\n    dispatch({\n      type: FAIL_LOGIN_REQUEST,\n      payload: e.message\n    })\n    console.log(e)\n    return null;\n  }\n}\n\nexport const rememberLoginUser = (dispatch, remember) => {\n  dispatch({\n    type: REMEMBER_LOGIN,\n    payload: remember,\n  })\n}\n\nexport const checkLogin = (dispatch) => {\n  const isLogin = checkLoginApi();\n  if(!isLogin) {\n    localStorage.removeItem('orderInfo')\n    dispatch({ type: LOGOUT_REQUEST });    \n  }\n  return isLogin;\n}\n\nexport const registerToFirebase = async (dispatch, userInfo) => {\n  dispatch({ type: BEGIN_REGISTER_REQUEST });\n  try {\n    const user = await registerWithEmailPassword(userInfo.email, userInfo.password, userInfo.name);\n    console.log(user)\n    dispatch({\n      type: SUCCESS_REGISTER_REQUEST,\n      payload: user.providerData[0],\n    })\n    return user;\n  } catch (e) {\n    dispatch({\n      type: FAIL_REGISTER_REQUEST,\n      payload: e.message\n    })\n    console.log(e)\n    return null;\n  }\n}\n\nexport const saveShippingAddress = (dispatch, shippingAddress) => {\n  dispatch({\n    type: SAVE_SHIPPING_ADDRESS,\n    payload: shippingAddress,\n  });\n  localStorage.setItem('shippingAddress', JSON.stringify(shippingAddress));\n}\n\nexport const savePaymentMethod = (dispatch, paymentMethod) => {\n  dispatch({\n    type: SAVE_PAYMENT_METHOD,\n    payload: paymentMethod.paymentMethod,\n  });\n}\n\nexport const createOrder = async (dispatch, cart) => {\n  dispatch({ type: BEGIN_ORDER_CREATE });\n  try {\n    const item = {\n      orderItems: cart.cartItems,\n      shippingAddress: cart.shippingAddress,\n      paymentMethod: cart.paymentMethod,\n      itemsPrice: cart.itemsPrice,\n      shippingPrice: cart.shippingPrice,\n      taxPrice: cart.taxPrice,\n      totalPrice: cart.totalPrice,\n    };    \n    const orderInfo = await createOrderApi(item);\n    dispatch({ \n      type: SUCCESS_ORDER_CREATE, \n      payload: orderInfo \n    });\n    dispatch({ type: EMPTY_CART,})\n    localStorage.setItem('orderInfo', JSON.stringify(orderInfo));\n    localStorage.removeItem(\"cartItems\");\n    return orderInfo;\n  } catch (error) {\n    console.log(error);\n    dispatch({ type: FAIL_ORDER_CREATE, payload: error });\n    return null;\n  }  \n};\n\nexport const requestOrderDetail = async (dispatch, orderId) => {\n  dispatch({ type: BEGIN_ORDER_DETAIL });\n  try {\n    const order = await getOrderById(orderId);\n    dispatch({ \n      type: SUCCESS_ORDER_DETAIL,\n      payload: order\n    });\n  } catch (error) {\n    dispatch({ \n      type: FAIL_ORDER_DETAIL, \n      payload: error \n    });\n  }\n}\n\nexport const updateUserInfo = async (dispatch, userInfo) => {\n  dispatch({ type: BEGIN_UPDATE_USERINFO });\n  try {\n    const user = await updateUserInfoApi(\n      userInfo.email,\n      userInfo.password,\n      userInfo.name\n    );\n    dispatch({\n      type: SUCCESS_UPDATE_USERINFO,\n      payload: user.providerData[0],\n    });\n  } catch (e) {\n    dispatch({\n      type: FAIL_UPDATE_USERINFO,\n      payload: e.message,\n    });\n    console.log(e);\n  }\n};\n\nexport const getUserOrders = async (dispatch) => {\n  dispatch({ type: SEARCH_USER_ORDERS });\n  try {\n    const orders = await getOrderByUser();\n    dispatch({ \n      type: SUCCESS_SEARCH,\n      payload: orders\n    });\n  }catch (error) {\n    dispatch({ \n      type: FAIL_SEARCH, \n      payload: error \n    });\n  }\n}\nexport const logoutFromFirebase = async (dispatch) => {\n  signOut();\n  dispatch({ type: LOGOUT_REQUEST });\n}"]},"metadata":{},"sourceType":"module"}